import{u as B,a as K}from"./useCarbonCalculator-88ZrkRIX.js";import{_ as P,r as x,m as U,p as Q,c as h,o as f,d as o,w as s,C as W,f as c,b as e,h as p,F as X,D as Y,G as Z,H as i,A as v,g as ee,E as L,I as te,J as oe}from"./index-wTkU4Sw2.js";const se={class:"carbon-calculator"},le={class:"text-xs text-gray-500 mt-1"},ae={key:0,class:"mb-4 p-3 bg-green-50 rounded-lg"},ne={class:"flex items-center justify-between"},re={class:"text-lg font-bold text-green-600"},de={class:"text-xs text-gray-500 mt-1"},ce={__name:"CarbonCalculator",emits:"submit",setup(z,{emit:m}){const k=m,w=B(),{carbonFactors:V,calculateCarbon:$,getCarbonLevel:g}=K(),S=x({}),l=x("transport"),t=x(""),n=x(0),u=x(0),b=U(()=>V[l.value]||{}),D=()=>{const d=b.value[t.value];return(d==null?void 0:d.unit)||"æ•°é‡"},r=()=>{const d=b.value[t.value];return(d==null?void 0:d.hint)||""},R=()=>{const d=g(u.value);return{æžä½Ž:"success",ä½Ž:"success",ä¸­ç­‰:"warning",é«˜:"danger",æžé«˜:"danger"}[d]||"info"},T=U(()=>t.value&&n.value>0),A=()=>{t.value="",n.value=0,u.value=0},E=()=>{n.value=0,u.value=0},M=()=>{t.value&&n.value>0?u.value=$(l.value,t.value,n.value):u.value=0},N=()=>{if(!T.value)return;const d={id:Date.now(),category:l.value,type:t.value,value:n.value,carbon:u.value,timestamp:new Date().toISOString(),level:g(u.value)};w.addRecord(d),t.value="",n.value=0,u.value=0,L.success("ç¢³è¶³è¿¹è®°å½•æˆåŠŸï¼"),k("submit",d)};return Q([t,n],()=>{M()}),(d,a)=>{const y=c("el-radio-button"),O=c("el-radio-group"),C=c("el-form-item"),j=c("el-option"),H=c("el-select"),G=c("el-input-number"),I=c("el-tag"),J=c("el-button"),q=c("el-form");return f(),h("div",se,[o(q,{model:S.value,"label-width":"80px",onSubmit:ee(N,["prevent"])},{default:s(()=>[o(C,{label:"åˆ†ç±»"},{default:s(()=>[o(O,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=_=>l.value=_),onChange:A},{default:s(()=>[o(y,{label:"transport"},{default:s(()=>[...a[3]||(a[3]=[e("span",{class:"mr-1"},"ðŸš‡",-1),p(" äº¤é€šå‡ºè¡Œ ",-1)])]),_:1}),o(y,{label:"diet"},{default:s(()=>[...a[4]||(a[4]=[e("span",{class:"mr-1"},"ðŸ±",-1),p(" é¥®é£Ÿæ¶ˆè´¹ ",-1)])]),_:1}),o(y,{label:"energy"},{default:s(()=>[...a[5]||(a[5]=[e("span",{class:"mr-1"},"ðŸ’¡",-1),p(" èƒ½æºæ¶ˆè€— ",-1)])]),_:1}),o(y,{label:"shopping"},{default:s(()=>[...a[6]||(a[6]=[e("span",{class:"mr-1"},"ðŸ›ï¸",-1),p(" è´­ç‰©æ¶ˆè´¹ ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(C,{label:"ç±»åž‹"},{default:s(()=>[o(H,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=_=>t.value=_),placeholder:"è¯·é€‰æ‹©å…·ä½“ç±»åž‹",style:{width:"100%"},onChange:E},{default:s(()=>[(f(!0),h(X,null,Y(b.value,(_,F)=>(f(),Z(j,{key:F,label:`${_.icon} ${F}`,value:F},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(C,{label:D()},{default:s(()=>[o(G,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=_=>n.value=_),min:0,step:.1,precision:2,style:{width:"100%"},placeholder:"è¯·è¾“å…¥æ•°å€¼",onChange:M},null,8,["modelValue"]),e("div",le,i(r()),1)]),_:1},8,["label"]),u.value>0?(f(),h("div",ae,[e("div",ne,[a[7]||(a[7]=e("span",{class:"text-sm font-medium text-gray-700"},"é¢„è®¡ç¢³æŽ’æ”¾ï¼š",-1)),e("span",re,i(u.value.toFixed(2))+" kg COâ‚‚",1)]),e("div",de,[a[8]||(a[8]=p(" ç­‰çº§ï¼š",-1)),o(I,{type:R(),size:"small"},{default:s(()=>[p(i(v(g)()),1)]),_:1},8,["type"])])])):W("",!0),o(C,null,{default:s(()=>[o(J,{type:"primary",style:{width:"100%"},onClick:N,disabled:!T.value},{default:s(()=>[...a[9]||(a[9]=[p(" è®°å½•ç¢³è¶³è¿¹ ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])}}},ue=P(ce,[["__scopeId","data-v-df0868a0"]]),ie={class:"records"},pe={class:"eco-card p-6 mb-6"},me={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6"},_e={class:"eco-card p-4"},ve={class:"text-center"},ge={class:"text-2xl font-bold text-eco-dark"},be={class:"eco-card p-4"},xe={class:"text-center"},fe={class:"text-2xl font-bold text-eco-dark"},ye={class:"eco-card p-4"},Ce={class:"text-center"},he={class:"text-2xl font-bold text-eco-dark"},ke={class:"eco-card p-4"},we={class:"text-center"},Ve={class:"text-2xl font-bold text-eco-dark"},$e={class:"eco-card p-6"},Fe={__name:"Records",setup(z){const m=B(),k=l=>oe(l).format("MM-DD"),w=l=>({transport:"äº¤é€š",diet:"é¥®é£Ÿ",energy:"èƒ½æº",shopping:"è´­ç‰©"})[l]||l,V=l=>({transport:"primary",diet:"success",energy:"warning",shopping:"info"})[l]||"",$=l=>l<2?"text-green-600":l<5?"text-yellow-600":l<10?"text-orange-600":"text-red-600",g=l=>{m.deleteRecord(l)&&console.log("åˆ é™¤æˆåŠŸ")},S=l=>{console.log("æ–°è®°å½•å·²æ·»åŠ :",l),L.success("ç¢³è¶³è¿¹è®°å½•æˆåŠŸï¼")};return(l,t)=>{const n=c("el-table-column"),u=c("el-tag"),b=c("el-button"),D=c("el-table");return f(),h("div",ie,[t[7]||(t[7]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-eco-dark mb-2"},"ç¢³è¶³è¿¹è®°å½•"),e("p",{class:"text-gray-600"},"è®°å½•ä½ çš„æ—¥å¸¸ç¢³æŽ’æ”¾ï¼Œè¿½è¸ªçŽ¯ä¿è¶³è¿¹")],-1)),e("div",pe,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold text-eco-dark mb-4"},"ç¢³æŽ’æ”¾è®¡ç®—å™¨",-1)),o(ue,{onRecordAdded:S})]),e("div",me,[e("div",_e,[e("div",ve,[e("div",ge,i(v(m).records.length),1),t[1]||(t[1]=e("div",{class:"text-sm text-gray-600"},"æ€»è®°å½•æ•°",-1))])]),e("div",be,[e("div",xe,[e("div",fe,i(v(m).todayCarbon.toFixed(2))+" kg ",1),t[2]||(t[2]=e("div",{class:"text-sm text-gray-600"},"ä»Šæ—¥æŽ’æ”¾",-1))])]),e("div",ye,[e("div",Ce,[e("div",he,i(v(m).weekCarbon.toFixed(2))+" kg ",1),t[3]||(t[3]=e("div",{class:"text-sm text-gray-600"},"æœ¬å‘¨æŽ’æ”¾",-1))])]),e("div",ke,[e("div",we,[e("div",Ve,i(v(m).monthCarbon.toFixed(2))+" kg ",1),t[4]||(t[4]=e("div",{class:"text-sm text-gray-600"},"æœ¬æœˆæŽ’æ”¾",-1))])])]),e("div",$e,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-eco-dark mb-4"},"è®°å½•è¯¦æƒ…",-1)),o(D,{data:v(m).records,style:{width:"100%"}},{default:s(()=>[o(n,{prop:"date",label:"æ—¥æœŸ",width:"120"},{default:s(({row:r})=>[p(i(k(r.date)),1)]),_:1}),o(n,{prop:"category",label:"åˆ†ç±»",width:"100"},{default:s(({row:r})=>[o(u,{type:V(r.category)},{default:s(()=>[p(i(w(r.category)),1)]),_:2},1032,["type"])]),_:1}),o(n,{prop:"type",label:"ç±»åž‹",width:"120"},{default:s(({row:r})=>[p(i(r.type),1)]),_:1}),o(n,{prop:"amount",label:"æ•°å€¼",width:"100"},{default:s(({row:r})=>[p(i(r.amount),1)]),_:1}),o(n,{prop:"carbon",label:"ç¢³æŽ’æ”¾",width:"120"},{default:s(({row:r})=>[e("span",{class:te($(r.carbon))},i(r.carbon)+" kg ",3)]),_:1}),o(n,{prop:"note",label:"å¤‡æ³¨","show-overflow-tooltip":""}),o(n,{label:"æ“ä½œ",width:"120"},{default:s(({row:r})=>[o(b,{size:"small",type:"danger",link:"",onClick:R=>g(r.id)},{default:s(()=>[...t[5]||(t[5]=[p(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])])}}};export{Fe as default};
