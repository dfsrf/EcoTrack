import{_ as se,u as ae,r as _,c as i,b as e,d as a,h as v,w as o,f as r,F as g,D as p,E as w,i as oe,o as n,I as S,H as l,C as le,G as V,M as ne}from"./index-CbzP8SXR.js";const re={class:"community"},ie={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},ce={class:"eco-card p-6"},de={class:"text-lg font-semibold text-eco-dark mb-4 flex items-center gap-2"},ue={class:"space-y-3"},me={class:"flex-1"},_e={class:"font-medium text-eco-dark"},ve={class:"text-sm text-gray-600"},ge={class:"eco-card p-6"},pe={class:"text-lg font-semibold text-eco-dark mb-4 flex items-center gap-2"},fe={class:"space-y-3"},xe={class:"flex-1"},he={class:"font-medium text-eco-dark"},be={class:"text-sm text-gray-600"},ye={class:"eco-card p-6"},ke={class:"text-lg font-semibold text-eco-dark mb-4 flex items-center gap-2"},we={class:"space-y-3"},Ce={class:"flex-1"},je={class:"font-medium text-eco-dark"},Te={class:"text-sm text-gray-600"},Ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Re={class:"lg:col-span-2"},ze={class:"flex justify-between items-center mb-4"},Fe={class:"space-y-4"},De={class:"flex items-center justify-between mb-4"},Ue={class:"flex items-center gap-3"},Se={class:"font-medium text-eco-dark"},Ee={class:"text-sm text-gray-500"},Ie={class:"mb-4"},Ne={class:"text-gray-700 leading-relaxed mb-3"},Be={key:0,class:"flex flex-wrap gap-2 mb-3"},He={class:"flex items-center gap-4 text-sm text-gray-500"},Le={class:"flex items-center gap-1 hover:text-eco-green transition-colors"},Pe={class:"flex items-center gap-1 hover:text-eco-green transition-colors"},$e={class:"flex items-center gap-1 hover:text-eco-green transition-colors"},Ke={class:"space-y-6"},Me={class:"eco-card p-6"},Oe={class:"space-y-3"},qe={class:"font-medium text-eco-dark text-sm mb-1"},Ae={class:"text-xs text-gray-600"},Ge={class:"flex flex-wrap gap-2 mb-2"},We={class:"flex gap-2"},Je={class:"mt-2"},Qe={class:"flex flex-wrap gap-1 mt-1"},Xe={class:"dialog-footer"},Ye={__name:"Community",setup(Ze){const h=ae(),E=oe(),f=_(!1),C=_(!1),j=_(null),x=_(""),c=_({content:"",tags:[]}),I={content:[{required:!0,message:"è¯·è¾“å…¥åŠ¨æ€å†…å®¹",trigger:"blur"},{min:10,max:500,message:"å†…å®¹é•¿åº¦åœ¨ 10 åˆ° 500 ä¸ªå­—ç¬¦",trigger:"blur"}]},N=_(["çŽ¯ä¿æŒ‘æˆ˜","èŠ‚èƒ½å‡æŽ’","ç»¿è‰²å‡ºè¡Œ","åžƒåœ¾åˆ†ç±»","ç´ é£Ÿä¸»ä¹‰","ä½Žç¢³ç”Ÿæ´»","èŠ‚èƒ½æŠ€å·§","çŽ¯ä¿å¿ƒå¾—","å¯æŒç»­ç”Ÿæ´»"]),B=_([{id:1,name:"çŽ¯ä¿è¾¾äººå°æŽ",avatar:"/avatars/user1.jpg",reduction:12.5},{id:2,name:"ç»¿è‰²ç”Ÿæ´»å®¶",avatar:"/avatars/user2.jpg",reduction:10.8},{id:3,name:"ä½Žç¢³å…ˆé”‹",avatar:"/avatars/user3.jpg",reduction:9.2},{id:4,name:"åœ°çƒå«å£«",avatar:"/avatars/user4.jpg",reduction:8.7}]),H=_([{id:1,name:"æŒ‘æˆ˜çŽ‹è€…",avatar:"/avatars/user5.jpg",challenges:15,points:1250},{id:2,name:"çŽ¯ä¿è¾¾äºº",avatar:"/avatars/user1.jpg",challenges:12,points:980},{id:3,name:"ä½Žç¢³ç”Ÿæ´»",avatar:"/avatars/user6.jpg",challenges:10,points:850},{id:4,name:"ç»¿è‰²å…ˆé”‹",avatar:"/avatars/user7.jpg",challenges:8,points:720}]),L=_([{id:1,name:"æ–°äººå°æ˜Ž",avatar:"/avatars/user8.jpg",days:3,reduction:5.2},{id:2,name:"çŽ¯ä¿å°ç™½",avatar:"/avatars/user9.jpg",days:5,reduction:4.8},{id:3,name:"ç»¿è‰²æ–°æ‰‹",avatar:"/avatars/user10.jpg",days:7,reduction:6.1},{id:4,name:"ä½Žç¢³æ–°äºº",avatar:"/avatars/user11.jpg",days:10,reduction:7.3}]),R=_([{id:1,user:{id:1,name:"çŽ¯ä¿è¾¾äººå°æŽ",avatar:"/avatars/user1.jpg"},content:'ä»Šå¤©å®Œæˆäº†"ä¸€å‘¨æ— å¤–å–"æŒ‘æˆ˜ï¼Œä¸ä»…å¥åº·äº†ï¼Œè¿˜å‡å°‘äº†ç¢³æŽ’æ”¾ï¼å¤§å®¶ä¸€èµ·æ¥è¯•è¯•å§ï¼ðŸŒ±',tags:["æ— å¤–å–æŒ‘æˆ˜","å¥åº·é¥®é£Ÿ"],likes:42,comments:8,shares:3,createTime:"2å°æ—¶å‰"},{id:2,user:{id:2,name:"ç»¿è‰²ç”Ÿæ´»å®¶",avatar:"/avatars/user2.jpg"},content:"åˆ†äº«ä¸€ä¸ªçŽ¯ä¿å°æŠ€å·§ï¼šæ´—æ¾¡æ—¶ç­‰å¾…çƒ­æ°´çš„å†·æ°´å¯ä»¥ç”¨æ¥æµ‡èŠ±æˆ–å†²åŽ•æ‰€ï¼Œä¸€å¹´ä¸‹æ¥èƒ½èŠ‚çº¦ä¸å°‘æ°´å‘¢ï¼ðŸ’§",tags:["èŠ‚æ°´æŠ€å·§","ç”Ÿæ´»å°çªé—¨"],likes:28,comments:5,shares:12,createTime:"4å°æ—¶å‰"}]),P=_([{id:1,title:"LEDç¯çš„èŠ‚èƒ½æ•ˆæžœ",content:"LEDç¯æ¯”ä¼ ç»Ÿç™½ç‚½ç¯èŠ‚èƒ½80%ï¼Œå¯¿å‘½é•¿25å€ã€‚"},{id:2,title:"å¡‘æ–™ç“¶å›žæ”¶åˆ©ç”¨",content:"ä¸€ä¸ªå¡‘æ–™ç“¶å›žæ”¶å¯å‡å°‘çº¦0.08kgç¢³æŽ’æ”¾ã€‚"},{id:3,title:"å…¬å…±äº¤é€šä¼˜åŠ¿",content:"å…¬äº¤è½¦äººå‡ç¢³æŽ’æ”¾æ˜¯ç§å®¶è½¦çš„1/8ã€‚"}]),z=d=>["bg-yellow-500 text-white","bg-gray-400 text-white","bg-orange-600 text-white"][d]||"bg-gray-200 text-gray-700",F=()=>{x.value.trim()&&!c.value.tags.includes(x.value.trim())&&(c.value.tags.push(x.value.trim()),x.value="")},$=d=>{c.value.tags.includes(d)||c.value.tags.push(d)},K=d=>{const s=c.value.tags.indexOf(d);s>-1&&c.value.tags.splice(s,1)},M=()=>{if(!h.isAuthenticated){w.warning("è¯·å…ˆç™»å½•åŽå†å‘å¸ƒåŠ¨æ€"),E.push("/login");return}f.value=!0,c.value={content:"",tags:[]}},O=()=>{f.value=!1},q=async()=>{if(j.value)try{await j.value.validate(),C.value=!0,await new Promise(s=>setTimeout(s,1e3));const d={id:Date.now(),user:{id:h.userInfo.id,name:h.userInfo.name,avatar:h.userInfo.avatar},content:c.value.content,tags:[...c.value.tags],likes:0,comments:0,shares:0,createTime:"åˆšåˆš"};R.value.unshift(d),w.success("å‘å¸ƒæˆåŠŸï¼"),f.value=!1}catch(d){console.error("å‘å¸ƒå¤±è´¥:",d),w.error("å‘å¸ƒå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{C.value=!1}},A=()=>{console.log("åˆ·æ–°åŠ¨æ€"),w.success("åŠ¨æ€å·²åˆ·æ–°")};return(d,s)=>{const G=r("Trophy"),u=r("el-icon"),b=r("User"),y=r("el-avatar"),W=r("Star"),J=r("UserFilled"),Q=r("Refresh"),k=r("el-button"),T=r("el-tag"),X=r("Heart"),Y=r("ChatDotRound"),Z=r("Share"),D=r("el-input"),U=r("el-form-item"),ee=r("el-form"),te=r("el-dialog");return n(),i("div",re,[e("div",{class:"mb-6"},[e("div",{class:"flex justify-between items-center"},[s[4]||(s[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-eco-dark mb-2"},"ç¤¾åŒºåŠ¨æ€"),e("p",{class:"text-gray-600"},"ä¸ŽçŽ¯ä¿è¾¾äººäº¤æµï¼Œåˆ†äº«ä½ çš„ç»¿è‰²ç”Ÿæ´»")],-1)),e("button",{onClick:M,class:"px-6 py-3 rounded-lg font-medium shadow-lg border-2 transition-colors",style:{"background-color":"#d1fae5","border-color":"#a7f3d0",color:"#065f46"}}," âœï¸ å‘å¸ƒåŠ¨æ€ ")])]),e("div",ie,[e("div",ce,[e("h3",de,[a(u,{color:"#f59e0b"},{default:o(()=>[a(G)]),_:1}),s[5]||(s[5]=v(" æœ¬å‘¨å‡æŽ’æ¦œ ",-1))]),e("div",ue,[(n(!0),i(g,null,p(B.value,(t,m)=>(n(),i("div",{key:t.id,class:"flex items-center gap-3"},[e("div",{class:S(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",z(m)])},l(m+1),3),a(y,{size:36,src:t.avatar},{default:o(()=>[a(u,null,{default:o(()=>[a(b)]),_:1})]),_:1},8,["src"]),e("div",me,[e("div",_e,l(t.name),1),e("div",ve,l(t.reduction)+" kg COâ‚‚",1)])]))),128))])]),e("div",ge,[e("h3",pe,[a(u,{color:"#10b981"},{default:o(()=>[a(W)]),_:1}),s[6]||(s[6]=v(" æŒ‘æˆ˜è¾¾äººæ¦œ ",-1))]),e("div",fe,[(n(!0),i(g,null,p(H.value,(t,m)=>(n(),i("div",{key:t.id,class:"flex items-center gap-3"},[e("div",{class:S(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",z(m)])},l(m+1),3),a(y,{size:36,src:t.avatar},{default:o(()=>[a(u,null,{default:o(()=>[a(b)]),_:1})]),_:1},8,["src"]),e("div",xe,[e("div",he,l(t.name),1),e("div",be,l(t.challenges)+" ä¸ªæŒ‘æˆ˜",1)])]))),128))])]),e("div",ye,[e("h3",ke,[a(u,{color:"#3b82f6"},{default:o(()=>[a(J)]),_:1}),s[7]||(s[7]=v(" çŽ¯ä¿æ–°æ˜Ÿæ¦œ ",-1))]),e("div",we,[(n(!0),i(g,null,p(L.value,(t,m)=>(n(),i("div",{key:t.id,class:"flex items-center gap-3"},[s[8]||(s[8]=e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-blue-500 text-white"}," NEW ",-1)),a(y,{size:36,src:t.avatar},{default:o(()=>[a(u,null,{default:o(()=>[a(b)]),_:1})]),_:1},8,["src"]),e("div",Ce,[e("div",je,l(t.name),1),e("div",Te,l(t.days)+" å¤©",1)])]))),128))])])]),e("div",Ve,[e("div",Re,[e("div",ze,[s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-eco-dark"},"æœ€æ–°åŠ¨æ€",-1)),a(k,{size:"small",onClick:A},{default:o(()=>[a(u,null,{default:o(()=>[a(Q)]),_:1}),s[9]||(s[9]=v(" åˆ·æ–° ",-1))]),_:1})]),e("div",Fe,[(n(!0),i(g,null,p(R.value,t=>(n(),i("div",{key:t.id,class:"eco-card p-6"},[e("div",De,[e("div",Ue,[a(y,{size:40,src:t.user.avatar},{default:o(()=>[a(u,null,{default:o(()=>[a(b)]),_:1})]),_:1},8,["src"]),e("div",null,[e("div",Se,l(t.user.name),1),e("div",Ee,l(t.createTime),1)])])]),e("div",Ie,[e("p",Ne,l(t.content),1),t.tags&&t.tags.length>0?(n(),i("div",Be,[(n(!0),i(g,null,p(t.tags,m=>(n(),V(T,{key:m,size:"small"},{default:o(()=>[v(" #"+l(m),1)]),_:2},1024))),128))])):le("",!0)]),e("div",He,[e("button",Le,[a(u,null,{default:o(()=>[a(X)]),_:1}),e("span",null,l(t.likes),1)]),e("button",Pe,[a(u,null,{default:o(()=>[a(Y)]),_:1}),e("span",null,l(t.comments),1)]),e("button",$e,[a(u,null,{default:o(()=>[a(Z)]),_:1}),e("span",null,l(t.shares),1)])])]))),128))])]),e("div",Ke,[e("div",Me,[s[11]||(s[11]=e("h3",{class:"text-lg font-semibold text-eco-dark mb-4"},"ðŸŒ¿ çŽ¯ä¿å°çŸ¥è¯†",-1)),e("div",Oe,[(n(!0),i(g,null,p(P.value,t=>(n(),i("div",{key:t.id,class:"p-3 bg-eco-light rounded-lg"},[e("h4",qe,l(t.title),1),e("p",Ae,l(t.content),1)]))),128))])])])]),a(te,{modelValue:f.value,"onUpdate:modelValue":s[3]||(s[3]=t=>f.value=t),title:"å‘å¸ƒåŠ¨æ€",width:"600px","before-close":O},{footer:o(()=>[e("div",Xe,[a(k,{onClick:s[2]||(s[2]=t=>f.value=!1)},{default:o(()=>[...s[14]||(s[14]=[v("å–æ¶ˆ",-1)])]),_:1}),a(k,{onClick:q,loading:C.value,style:{"background-color":"#d1fae5","border-color":"#a7f3d0",color:"#065f46"}},{default:o(()=>[...s[15]||(s[15]=[v(" å‘å¸ƒ ",-1)])]),_:1},8,["loading"])])]),default:o(()=>[a(ee,{model:c.value,rules:I,ref_key:"publishFormRef",ref:j,"label-width":"80px"},{default:o(()=>[a(U,{label:"å†…å®¹",prop:"content"},{default:o(()=>[a(D,{modelValue:c.value.content,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value.content=t),type:"textarea",rows:4,placeholder:"åˆ†äº«ä½ çš„çŽ¯ä¿ç”Ÿæ´»...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(U,{label:"æ ‡ç­¾"},{default:o(()=>[e("div",Ge,[(n(!0),i(g,null,p(c.value.tags,t=>(n(),V(T,{key:t,closable:"",onClose:m=>K(t),class:"mb-1"},{default:o(()=>[v(" #"+l(t),1)]),_:2},1032,["onClose"]))),128))]),e("div",We,[a(D,{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),placeholder:"æ·»åŠ æ ‡ç­¾",size:"small",style:{width:"150px"},onKeyup:ne(F,["enter"])},null,8,["modelValue"]),a(k,{size:"small",onClick:F},{default:o(()=>[...s[12]||(s[12]=[v("æ·»åŠ ",-1)])]),_:1})]),e("div",Je,[s[13]||(s[13]=e("span",{class:"text-xs text-gray-500"},"æŽ¨èæ ‡ç­¾ï¼š",-1)),e("div",Qe,[(n(!0),i(g,null,p(N.value,t=>(n(),V(T,{key:t,size:"small",type:"info",class:"cursor-pointer hover:bg-blue-100",onClick:m=>$(t)},{default:o(()=>[v(l(t),1)]),_:2},1032,["onClick"]))),128))])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},tt=se(Ye,[["__scopeId","data-v-58c8eed3"]]);export{tt as default};
