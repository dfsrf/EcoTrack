import{K as Y,J as n,r as k,m as s}from"./index-CbzP8SXR.js";const D=Y("records",()=>{const m=n().format("YYYY-MM-DD"),d=n().subtract(1,"day").format("YYYY-MM-DD"),r=k([{id:"record_001",date:m,category:"transport",type:"åœ°é“",amount:15,carbon:2.1,note:"ä¸Šç­é€šå‹¤"},{id:"record_002",date:m,category:"diet",type:"ç´ é£Ÿåˆé¤",amount:1,carbon:1.2,note:"ç´ é£ŸçŽ¯ä¿é¤"},{id:"record_003",date:d,category:"energy",type:"å®¶åº­ç”¨ç”µ",amount:5.2,carbon:4.8,note:"æ—¥å¸¸ç”¨ç”µ"}]),c={transport:{åœ°é“:.14,å…¬äº¤:.22,å…±äº«å•è½¦:0,æ­¥è¡Œ:0,ç§å®¶è½¦:.21,å‡ºç§Ÿè½¦:.28,é£žæœº:.115},diet:{ç‰›è‚‰:27,çŒªè‚‰:12.1,é¸¡è‚‰:6.9,é±¼ç±»:5.4,ç´ é£Ÿ:2,ç´ é£Ÿåˆé¤:1.2,æ™®é€šåˆé¤:3.5},energy:{å®¶åº­ç”¨ç”µ:.92,ç‡ƒæ°”:2.18,è‡ªæ¥æ°´:.34},shopping:{è¡£ç‰©:15,ç”µå­äº§å“:50,ä¹¦ç±:2.5,æ—¥å¸¸ç”¨å“:3}},u=s(()=>{const t=n().format("YYYY-MM-DD");return r.value.filter(e=>e.date===t).reduce((e,o)=>e+(o.carbon||0),0)}),f=s(()=>{const t=n().subtract(6,"day").startOf("day");return r.value.filter(e=>n(e.date).isAfter(t)||n(e.date).isSame(t)).reduce((e,o)=>e+(o.carbon||0),0)}),g=s(()=>{const t=n().startOf("month");return r.value.filter(e=>n(e.date).isAfter(t)||n(e.date).isSame(t)).reduce((e,o)=>e+(o.carbon||0),0)}),y=s(()=>{const t={transport:0,diet:0,energy:0,shopping:0};return r.value.forEach(e=>{t.hasOwnProperty(e.category)&&(t[e.category]+=e.carbon)}),t}),h=s(()=>{const t=[];for(let e=6;e>=0;e--){const o=n().subtract(e,"day").format("YYYY-MM-DD"),i=r.value.filter(a=>a.date===o).reduce((a,v)=>a+v.carbon,0);t.push({date:n().subtract(e,"day").format("MM-DD"),carbon:parseFloat(i.toFixed(1))})}return t}),C=(t,e,o)=>{var a;const i=(a=c[t])==null?void 0:a[e];return i===void 0?0:Math.round(o*i*100)/100};return{records:r,carbonCalculator:c,todayCarbon:u,weekCarbon:f,monthCarbon:g,categoryCarbon:y,dailyTrend:h,calculateCarbon:C,addRecord:t=>{const e={id:`record_${Date.now()}`,date:n().format("YYYY-MM-DD"),...t,carbon:C(t.category,t.type,t.amount)};return r.value.push(e),e},deleteRecord:t=>{const e=r.value.findIndex(o=>o.id===t);return e>-1?(r.value.splice(e,1),!0):!1},getRecordsByDateRange:(t,e)=>r.value.filter(o=>n(o.date).isAfter(t)&&n(o.date).isBefore(e))}}),p={transport:{åœ°é“:{factor:.14,unit:"kgCOâ‚‚/km",icon:"ðŸš‡"},å…¬äº¤:{factor:.22,unit:"kgCOâ‚‚/km",icon:"ðŸšŒ"},å…±äº«å•è½¦:{factor:0,unit:"kgCOâ‚‚/km",icon:"ðŸš²"},æ­¥è¡Œ:{factor:0,unit:"kgCOâ‚‚/km",icon:"ðŸš¶"},ç§å®¶è½¦:{factor:.21,unit:"kgCOâ‚‚/km",icon:"ðŸš—"},å‡ºç§Ÿè½¦:{factor:.28,unit:"kgCOâ‚‚/km",icon:"ðŸš•"},é£žæœº:{factor:.115,unit:"kgCOâ‚‚/km",icon:"âœˆï¸"},é«˜é“:{factor:.045,unit:"kgCOâ‚‚/km",icon:"ðŸš„"}},diet:{ç‰›è‚‰:{factor:27,unit:"kgCOâ‚‚/kg",icon:"ðŸ¥©"},çŒªè‚‰:{factor:12.1,unit:"kgCOâ‚‚/kg",icon:"ðŸ–"},é¸¡è‚‰:{factor:6.9,unit:"kgCOâ‚‚/kg",icon:"ðŸ—"},é±¼ç±»:{factor:5.4,unit:"kgCOâ‚‚/kg",icon:"ðŸŸ"},ç´ é£Ÿ:{factor:2,unit:"kgCOâ‚‚/kg",icon:"ðŸ¥¬"},ç´ é£Ÿåˆé¤:{factor:1.2,unit:"kgCOâ‚‚/ä»½",icon:"ðŸ¥—"},æ™®é€šåˆé¤:{factor:3.5,unit:"kgCOâ‚‚/ä»½",icon:"ðŸ±"},å’–å•¡:{factor:.4,unit:"kgCOâ‚‚/æ¯",icon:"â˜•"},å¥¶èŒ¶:{factor:.8,unit:"kgCOâ‚‚/æ¯",icon:"ðŸ§‹"}},energy:{å®¶åº­ç”¨ç”µ:{factor:.92,unit:"kgCOâ‚‚/kWh",icon:"ðŸ’¡"},ç‡ƒæ°”:{factor:2.18,unit:"kgCOâ‚‚/mÂ³",icon:"ðŸ”¥"},è‡ªæ¥æ°´:{factor:.34,unit:"kgCOâ‚‚/mÂ³",icon:"ðŸ’§"},ç©ºè°ƒç”¨ç”µ:{factor:.92,unit:"kgCOâ‚‚/kWh",icon:"â„ï¸"},æš–æ°”:{factor:2.18,unit:"kgCOâ‚‚/mÂ³",icon:"ðŸ”¥"}},shopping:{è¡£ç‰©:{factor:15,unit:"kgCOâ‚‚/ä»¶",icon:"ðŸ‘”"},ç”µå­äº§å“:{factor:50,unit:"kgCOâ‚‚/ä»¶",icon:"ðŸ“±"},ä¹¦ç±:{factor:2.5,unit:"kgCOâ‚‚/æœ¬",icon:"ðŸ“š"},æ—¥å¸¸ç”¨å“:{factor:3,unit:"kgCOâ‚‚/ä»¶",icon:"ðŸ§´"},å¤–å–åŒ…è£…:{factor:.5,unit:"kgCOâ‚‚/æ¬¡",icon:"ðŸ¥¡"}}},l={high:["è€ƒè™‘ä½¿ç”¨å…¬å…±äº¤é€šä»£æ›¿ç§å®¶è½¦å‡ºè¡Œ","å‡å°‘çº¢è‚‰æ¶ˆè´¹ï¼Œå¢žåŠ ç´ é£Ÿæ¯”ä¾‹","åŠæ—¶å…³é—­ä¸ç”¨çš„ç”µå™¨ï¼Œé¿å…å¾…æœºèƒ½è€—","é€‰æ‹©æœ¬åœ°äº§å“ï¼Œå‡å°‘è¿è¾“ç¢³æŽ’æ”¾"],medium:["åˆç†å®‰æŽ’å‡ºè¡Œï¼Œåˆå¹¶å¤šä¸ªç›®çš„åœ°","é€‰æ‹©åº”å­£è”¬èœæ°´æžœï¼Œå‡å°‘æ¸©å®¤ç§æ¤","ä½¿ç”¨èŠ‚èƒ½ç”µå™¨ï¼Œæé«˜èƒ½æ•ˆç­‰çº§","å‡å°‘ä¸å¿…è¦çš„è´­ç‰©ï¼Œç†æ€§æ¶ˆè´¹"],low:["ä¿æŒè‰¯å¥½çš„çŽ¯ä¿ä¹ æƒ¯ï¼Œç»§ç»­åŠªåŠ›ï¼","å¯ä»¥åˆ†äº«ä½ çš„çŽ¯ä¿ç»éªŒç»™æœ‹å‹","å‚ä¸Žæ›´å¤šçŽ¯ä¿æŒ‘æˆ˜ï¼ŒèŽ·å¾—æˆå°±","å…³æ³¨çŽ¯ä¿æ–°é—»ï¼Œå­¦ä¹ æ›´å¤šçŸ¥è¯†"]};function w(){const m=D(),d=k("transport"),r=k(""),c=k(""),u=k(0),f=s(()=>p[d.value]||{}),g=s(()=>!r.value||!f.value[r.value]?null:f.value[r.value]),y=()=>{if(!g.value||!c.value)return u.value=0,0;const t=parseFloat(c.value);if(isNaN(t)||t<=0)return u.value=0,0;const e=t*g.value.factor;return u.value=Math.round(e*100)/100,u.value},h=(t="")=>{if(y()<=0)return{success:!1,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å€¼"};const o=m.addRecord({category:d.value,type:r.value,amount:parseFloat(c.value),note:t});return C(),{success:!0,data:o}},C=()=>{r.value="",c.value="",u.value=0};return{carbonFactors:p,selectedCategory:d,selectedType:r,inputValue:c,calculatedCarbon:u,currentCategoryOptions:f,selectedFactorInfo:g,calculateCarbon:y,addRecord:h,resetForm:C,getEcoTips:t=>t>10?l.high[Math.floor(Math.random()*l.high.length)]:t>5?l.medium[Math.floor(Math.random()*l.medium.length)]:l.low[Math.floor(Math.random()*l.low.length)],getCarbonLevel:t=>t<2?{level:"low",text:"ä½Žç¢³",color:"#10b981"}:t<5?{level:"medium",text:"ä¸­ç­‰",color:"#f59e0b"}:t<10?{level:"high",text:"è¾ƒé«˜",color:"#ef4444"}:{level:"very_high",text:"å¾ˆé«˜",color:"#dc2626"},calculateCarbonByCategory:(t,e,o)=>{var a,v;const i=(v=(a=p[t])==null?void 0:a[e])==null?void 0:v.factor;return i===void 0||o<=0?0:Math.round(o*i*100)/100}}}export{w as a,D as u};
