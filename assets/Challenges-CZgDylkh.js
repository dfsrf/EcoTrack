import{L as B,u as E,r as N,m as A,c as d,b as s,d as l,I as o,A as r,w as c,f as p,o as i,h as u,F as y,G as f,J as F,M as J,E as x}from"./index-KJ8F0kGT.js";const L={class:"challenges"},$={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},j={class:"eco-card p-6 text-center"},G={class:"text-2xl font-bold text-eco-dark"},O={class:"eco-card p-6 text-center"},R={class:"text-2xl font-bold text-eco-dark"},q={class:"eco-card p-6 text-center"},H={class:"text-2xl font-bold text-eco-dark"},K={class:"eco-card p-6 text-center"},Q={class:"text-2xl font-bold text-eco-dark"},W={key:0,class:"text-center py-12"},X={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"flex items-center gap-3 mb-4"},Z={class:"text-2xl"},tt={class:"font-semibold text-eco-dark"},st={class:"text-sm text-gray-600"},et={class:"mt-4"},ot={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lt={class:"flex items-center gap-3 mb-4"},at={class:"text-2xl"},nt={class:"font-semibold text-eco-dark"},dt={class:"text-gray-600 text-sm mb-4"},it={class:"flex items-center gap-2 text-sm text-gray-500 mb-4"},ct={key:0,class:"text-center py-12"},rt={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},pt={class:"text-center"},mt={class:"font-semibold text-eco-dark"},xt={class:"text-sm text-eco-green mt-2"},ut={__name:"Challenges",setup(_t){const n=B(),h=E(),_=N("available"),w=A(()=>n.completedChallenges.reduce((a,t)=>{var m,g;return a+(((g=(m=t.challenge)==null?void 0:m.reward)==null?void 0:g.points)||0)},0)),C=a=>({easy:"success",medium:"warning",hard:"danger"})[a]||"info",S=a=>({easy:"ç®€å•",medium:"ä¸­ç­‰",hard:"å›°éš¾"})[a]||"æœªçŸ¥",T=()=>{_.value="available"},M=a=>{const t=n.joinChallenge(a.id);t.success?(x.success("æˆåŠŸå‚åŠ æŒ‘æˆ˜ï¼"),_.value="active"):x.error(t.message||"å‚åŠ æŒ‘æˆ˜å¤±è´¥")},v=a=>{const t=new Date().toISOString().split("T")[0];return a.lastCheckInDate===t},V=a=>{const t=n.updateChallengeProgress(a.id);t.success?t.completed?(x.success("ğŸ‰ æ­å–œå®ŒæˆæŒ‘æˆ˜ï¼"),h.addPoints(t.reward.points)):x.success("ä»Šæ—¥æ‰“å¡æˆåŠŸï¼"):x.error(t.message||"æ›´æ–°è¿›åº¦å¤±è´¥")};return(a,t)=>{const m=p("el-button"),g=p("el-progress"),b=p("el-tab-pane"),D=p("el-tag"),P=p("Calendar"),k=p("el-icon"),U=p("User"),z=p("el-tabs");return i(),d("div",L,[t[15]||(t[15]=s("div",{class:"mb-6"},[s("h1",{class:"text-3xl font-bold text-eco-dark mb-2"},"ç¯ä¿æŒ‘æˆ˜ä¸­å¿ƒ"),s("p",{class:"text-gray-600"},"å‚ä¸ç¯ä¿æŒ‘æˆ˜ï¼Œå…»æˆç»¿è‰²ç”Ÿæ´»ä¹ æƒ¯")],-1)),s("div",$,[s("div",j,[t[1]||(t[1]=s("div",{class:"text-3xl mb-2"},"ğŸ†",-1)),s("div",G,o(r(n).completedChallenges.length),1),t[2]||(t[2]=s("div",{class:"text-sm text-gray-600"},"å·²å®ŒæˆæŒ‘æˆ˜",-1))]),s("div",O,[t[3]||(t[3]=s("div",{class:"text-3xl mb-2"},"ğŸ¯",-1)),s("div",R,o(r(n).activeChallenges.length),1),t[4]||(t[4]=s("div",{class:"text-sm text-gray-600"},"è¿›è¡Œä¸­æŒ‘æˆ˜",-1))]),s("div",q,[t[5]||(t[5]=s("div",{class:"text-3xl mb-2"},"ğŸ”¥",-1)),s("div",H,o(r(n).totalProgress)+"% ",1),t[6]||(t[6]=s("div",{class:"text-sm text-gray-600"},"æ€»ä½“è¿›åº¦",-1))]),s("div",K,[t[7]||(t[7]=s("div",{class:"text-3xl mb-2"},"ğŸ’",-1)),s("div",Q,o(w.value),1),t[8]||(t[8]=s("div",{class:"text-sm text-gray-600"},"ç´¯è®¡å¥–åŠ±ç§¯åˆ†",-1))])]),l(z,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),class:"mb-8"},{default:c(()=>[l(b,{label:"è¿›è¡Œä¸­",name:"active"},{default:c(()=>[r(n).activeChallenges.length===0?(i(),d("div",W,[t[10]||(t[10]=s("div",{class:"text-6xl mb-4"},"ğŸ˜´",-1)),t[11]||(t[11]=s("p",{class:"text-gray-600 text-lg"},"æš‚æ— è¿›è¡Œä¸­çš„æŒ‘æˆ˜",-1)),l(m,{type:"primary",class:"mt-4",onClick:T},{default:c(()=>[...t[9]||(t[9]=[u(" å»å‘ç°æ–°æŒ‘æˆ˜ ",-1)])]),_:1})])):(i(),d("div",X,[(i(!0),d(y,null,f(r(n).activeChallenges,e=>(i(),d("div",{key:e.id,class:"eco-card p-6"},[s("div",Y,[s("span",Z,o(e.challenge.icon),1),s("div",null,[s("h3",tt,o(e.challenge.title),1),s("p",st,o(e.progress)+"/"+o(e.challenge.duration)+" å¤© ",1)])]),l(g,{percentage:e.progress/e.challenge.duration*100,color:e.challenge.color,"show-text":!1},null,8,["percentage","color"]),s("div",et,[l(m,{size:"small",type:"primary",onClick:I=>V(e),disabled:v(e),class:F({"opacity-50 cursor-not-allowed":v(e)})},{default:c(()=>[u(o(v(e)?"âœ“ å·²æ‰“å¡":"ä»Šæ—¥æ‰“å¡"),1)]),_:2},1032,["onClick","disabled","class"])])]))),128))]))]),_:1}),l(b,{label:"å¯å‚åŠ ",name:"available"},{default:c(()=>[s("div",ot,[(i(!0),d(y,null,f(r(n).availableChallenges,e=>(i(),d("div",{key:e.id,class:"eco-card p-6 hover:shadow-xl transition-shadow"},[s("div",lt,[s("span",at,o(e.icon),1),s("div",null,[s("h3",nt,o(e.title),1),l(D,{type:C(e.difficulty),size:"small"},{default:c(()=>[u(o(S(e.difficulty)),1)]),_:2},1032,["type"])])]),s("p",dt,o(e.description),1),s("div",it,[l(k,null,{default:c(()=>[l(P)]),_:1}),s("span",null,o(e.duration)+" å¤©",1),l(k,null,{default:c(()=>[l(U)]),_:1}),s("span",null,o(e.participants)+" äººå‚ä¸",1)]),l(m,{type:"primary",class:"w-full",onClick:I=>M(e),style:J({backgroundColor:e.color,borderColor:e.color})},{default:c(()=>[...t[12]||(t[12]=[u(" å‚åŠ æŒ‘æˆ˜ ",-1)])]),_:1},8,["onClick","style"])]))),128))])]),_:1}),l(b,{label:"å·²å®Œæˆ",name:"completed"},{default:c(()=>[r(n).completedChallenges.length===0?(i(),d("div",ct,[...t[13]||(t[13]=[s("div",{class:"text-6xl mb-4"},"ğŸ…",-1),s("p",{class:"text-gray-600 text-lg"},"è¿˜æ²¡æœ‰å®Œæˆä»»ä½•æŒ‘æˆ˜",-1)])])):(i(),d("div",rt,[(i(!0),d(y,null,f(r(n).completedChallenges,e=>(i(),d("div",{key:e.id,class:"eco-card p-6"},[s("div",pt,[t[14]||(t[14]=s("div",{class:"text-2xl mb-2"},"ğŸ‰",-1)),s("h3",mt,o(e.challenge.title),1),s("p",xt," å·²å®Œæˆï¼Œè·å¾— "+o(e.challenge.reward.points)+" ç§¯åˆ† ",1)])]))),128))]))]),_:1})]),_:1},8,["modelValue"])])}}};export{ut as default};
